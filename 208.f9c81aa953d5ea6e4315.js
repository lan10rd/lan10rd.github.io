(self.webpackChunkgrams=self.webpackChunkgrams||[]).push([[208],{1603:(t,s,e)=>{"use strict";e.d(s,{n:()=>l});var o=e(4788);const i=["child"],n=["*"];let l=(()=>{class t{constructor(){this.scroll=new o.vpe}ngOnInit(){this.classes=this.classes?"scrollable "+this.classes:"scrollable tcenter bl",this.styles||(this.styles="")}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["common-ng-scroll-element"]],viewQuery:function(t,s){if(1&t&&o.Gf(i,5),2&t){let t;o.iGM(t=o.CRH())&&(s.child=t.first)}},inputs:{classes:"classes",styles:"styles"},outputs:{scroll:"scroll"},ngContentSelectors:n,decls:4,vars:4,consts:[[3,"scroll"],["child",""]],template:function(t,s){1&t&&(o.F$t(),o.TgZ(0,"div",0,1),o.NdJ("scroll",function(t){return s.scroll.emit(t)}),o.Hsn(2),o._UZ(3,"div"),o.qZA()),2&t&&(o.Akn(s.styles),o.Tol(s.classes))},styles:[""]}),t})()},7208:(t,s,e)=>{"use strict";e.d(s,{r:()=>k});var o=e(4762),i=e(4788),n=e(6682),l=e(2759),c=e(5335),h=e(267),r=e(2057),u=e(1603),a=e(5489),f=e(9202),p=e(4751);const d=["bigScrollElement"],g=["scrollElement"],b=["buttons"],_=function(t){return{"glo-0-shadow":t}};function m(t,s){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",8),i.TgZ(2,"button",9,10),i.NdJ("click",function(){const s=i.CHM(t).$implicit;return i.oxw(3).select(s)})("focus",function(s){const e=i.CHM(t).index,o=i.MAs(3);return i.oxw(3).buttonFocus(e,s,o)})("keydown",function(s){i.CHM(t);const e=i.MAs(3);i.oxw();const o=i.MAs(1);return i.oxw(2).cycleButton(s,o,e)}),i._uU(4),i.qZA(),i.qZA(),i.BQk()}if(2&t){const t=s.$implicit,e=i.oxw(3);i.xp6(1),i.Akn(e.buttonStyles),i.Tol(e.buttonClasses),i.Q6J("ngClass",i.VKq(7,_,e.toggleable&&t===e.selected)),i.xp6(1),i.s9C("tabindex",e.trap_focus?0:-1),i.xp6(2),i.hij(" ",e._options[t]," ")}}function w(t,s){if(1&t){const t=i.EpF();i.TgZ(0,"common-ng-scroll-element",5,6),i.NdJ("scroll",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s)})("click",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s,"click")})("focus",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s)}),i.YNc(2,m,5,9,"ng-container",7),i.qZA()}if(2&t){const t=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",t.__options)}}function v(t,s){if(1&t){const t=i.EpF();i.TgZ(0,"div",8),i.TgZ(1,"button",9,10),i.NdJ("click",function(){const s=i.CHM(t).$implicit;return i.oxw(3).select(s)})("focus",function(s){const e=i.CHM(t).index,o=i.MAs(2);return i.oxw(3).buttonFocus(e,s,o)})("keydown",function(s){i.CHM(t);const e=i.MAs(2);i.oxw();const o=i.MAs(1);return i.oxw(2).cycleButton(s,o,e)}),i._uU(3),i.qZA(),i.qZA()}if(2&t){const t=s.$implicit,e=s.index,o=i.oxw(3);i.Akn(o.buttonStyles),i.Tol(o.buttonClasses),i.Q6J("ngClass",i.VKq(8,_,o.toggleable&&t===o.selected)),i.xp6(1),i.s9C("tabindex",o.trap_focus?0:-1),i.uIk("x-button-i",e),i.xp6(2),i.hij(" ",o._options[t]," ")}}const y=function(t){return{height:t}};function x(t,s){if(1&t){const t=i.EpF();i.TgZ(0,"cdk-virtual-scroll-viewport",11,12),i.NdJ("scroll",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s)})("click",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s,"click")})("focus",function(s){i.CHM(t);const e=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,e,s)}),i.YNc(2,v,4,10,"div",13),i.qZA()}if(2&t){const t=i.oxw(2);i.Q6J("ngStyle",i.VKq(2,y,t.height)),i.xp6(2),i.Q6J("cdkVirtualForOf",t.__options)}}function C(t,s){if(1&t){const t=i.EpF();i.TgZ(0,"div",14),i.TgZ(1,"input",15),i.NdJ("ngModelChange",function(s){return i.CHM(t),i.oxw(2).search=s})("ngModelChange",function(){i.CHM(t);const s=i.oxw(2);return s.searchChange.emit(s.search),s.filter()}),i.qZA(),i.qZA()}if(2&t){const t=i.oxw(2);i.xp6(1),i.Q6J("ngModel",t.search)}}function M(t,s){if(1&t&&(i.TgZ(0,"div",null,1),i.YNc(2,w,3,1,"common-ng-scroll-element",2),i.YNc(3,x,3,4,"cdk-virtual-scroll-viewport",3),i.YNc(4,C,2,1,"div",4),i.qZA()),2&t){const t=i.oxw();i.xp6(2),i.Q6J("ngIf",!t.big),i.xp6(1),i.Q6J("ngIf",t.big),i.xp6(1),i.Q6J("ngIf",t.show_search)}}let k=(()=>{class t{constructor(t,s,e){this.cd=t,this.json=s,this.document=e,this.selected=-7,this.optionChange=new i.vpe,this.toggleable=!0,this.searchEnabled=!0,this.searchEnabledSize=1,this.search="",this.searchChange=new i.vpe,this.color="white",this.emitUndefined=!0,this.height="3.25rem",this.big=!1,this.big_threshold=77,this.show_search=!1,this.has_focus=!1,this.trap_focus=!1,this.focused_button=0}ngOnInit(){this.buttonClasses||(this.buttonClasses="p glo-0-text-ani ib"),this.buttonStyles||(this.buttonStyles="")}ngOnChanges(t){setTimeout(()=>{var s,e;if("options"in t){if(t.options.firstChange||this.select(-7),t.options.currentValue){let s=this.json.typeOf(t.options.currentValue);if("obj"===s){let s=this.json.keys(t.options.currentValue);s.length>0&&(this._type=this.json.typeOf(t.options.currentValue[s[0]])+"{}")}else"arr"===s&&t.options.currentValue.length>0&&(this._type=this.json.typeOf(t.options.currentValue[0])+"[]");this._type&&this.setOptions()}this.big=(null===(s=this.options)||void 0===s?void 0:s.length)>=this.big_threshold}if(this.json.isDefined(this.initial)&&!this.option&&(null===(e=this._options)||void 0===e?void 0:e.length)>0){let t=this.json.typeOf(this.initial);if("boo"===t)this.select(0);else if("num"===t)this.select(this.initial);else if("str"===t)for(let s=0;s<this._options.length;s++)if(this._options[s]===this.initial){this.select(s);break}}if("option"in t&&this._options)for(let o=0;o<this._options.length;o++)if("str[]"===this._type){if(this._options[o]===t.option.currentValue){this.selected!==o&&this.select(o);break}}else if(this.path&&this._options[o]===this.json.pathToValue(t.option.currentValue,this.path)){this.selected!==o&&this.select(o);break}},0)}cycleButton(t,s,e){var o,i;if(console.log("button",e),"Tab"===(null==t?void 0:t.key)){console.log("cycleButton",t),t.preventDefault(),console.log("this.focused_button");let e=this.focused_button+1;e=t.shiftKey?this.focused_button-1:this.focused_button+1,e<0?e=this.__options.length-1:e>this.__options.length-1&&(e=0);let n=null===(i=null===(o=s.child)||void 0===o?void 0:o.nativeElement)||void 0===i?void 0:i.querySelectorAll("button");if(n)n[e].focus();else{let t=this.buttons.find((t,s)=>+t.nativeElement.attributes["x-button-i"].value===e);if(null==t?void 0:t.nativeElement)t.nativeElement.focus();else{let t=s.elementRef.nativeElement.querySelector(".cdk-virtual-scroll-content-wrapper").parentElement;t.scrollTo(0===e?{left:0}:{left:t.scrollWidth}),setTimeout(()=>{let t=s.elementRef.nativeElement.querySelectorAll("button");t[0===e?0:t.length-1].focus()},25)}}}}buttonFocus(t,s,e){return(0,o.mG)(this,void 0,void 0,function*(){this.focused_button=t,e.focus()})}focus(t,s,e,i){return(0,o.mG)(this,void 0,void 0,function*(){let o=e.srcElement;this.trap_focus=!1,this.searchEnabled&&!this.has_focus$&&this._options.length>=this.searchEnabledSize&&(this.show_search=!0,this.has_focus$=(0,n.T)((0,l.R)(this.document.document.documentElement,"mousedown"),(0,l.R)(this.document.document.documentElement,"touchstart"),(0,l.R)(this.document.document.documentElement,"keyup")).subscribe(e=>{var i,n;if(-1===e.composedPath().indexOf(t))this.unfocus();else if("Enter"===(null==e?void 0:e.key))if(this.trap_focus)e.preventDefault();else{let t=null===(n=null===(i=s.child)||void 0===i?void 0:i.nativeElement)||void 0===n?void 0:n.querySelector("button");t||(t=s.elementRef.nativeElement.querySelector("button")),t&&(t.focus(),this.trap_focus=!0)}else"Escape"===(null==e?void 0:e.key)&&(this.trap_focus=!1,o.focus())}))})}unfocus(){this.show_search=!1,this.has_focus$&&this.has_focus$.unsubscribe(),this.has_focus$=null}select(t,s=!0){t<0||this.selected===t?(this.selected=-7,this.option=void 0,this._option=void 0):(this.selected=t,this._type.endsWith("[]")?(this.option=this.options[this.selected],this._option=this._options[this.selected]):this._type.endsWith("{}")&&!this.path?(this._option=this._options[this.selected],this.option=this.options[this._option]):this._type.endsWith("{}")&&this.path&&(this.option=this.json.values(this.options)[this.selected],this._option=this._options[this.selected])),s&&(void 0!==this.option||this.emitUndefined)&&this.optionChange.emit(this.option)}setOptions(){if("str[]"===this._type)this._options=this.options;else if(this._type.endsWith("[]")&&this.path){let t=[];for(let s of this.options)t.push(this.json.pathToValue(s,this.path));this._options=t}else if(this._type.endsWith("{}")&&!this.path)this._options=this.json.keys(this.options);else if(this._type.endsWith("{}")&&this.path){let t=[];for(let s of this.json.values(this.options))t.push(this.json.pathToValue(s,this.path));this._options=t}this.filter()}filter(){if(!this.searchEnabled||0===this.search.trim().length)return void(this.__options=Array.from(Array(this._options.length).keys()));let t=[];for(let s=0;s<this._options.length;s++){let e=this._options[s];(this.search.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(this.search.toLowerCase()))&&t.push(s)}this.__options=t}}return t.\u0275fac=function(s){return new(s||t)(i.Y36(i.sBO),i.Y36(c.V),i.Y36(h.k))},t.\u0275cmp=i.Xpm({type:t,selectors:[["common-ng-select-element"]],viewQuery:function(t,s){if(1&t&&(i.Gf(d,5),i.Gf(g,5),i.Gf(b,5)),2&t){let t;i.iGM(t=i.CRH())&&(s.bigScrollElement=t.first),i.iGM(t=i.CRH())&&(s.scrollElement=t.first),i.iGM(t=i.CRH())&&(s.buttons=t)}},inputs:{option:"option",options:"options",path:"path",initial:"initial",toggleable:"toggleable",filterFun:"filterFun",searchEnabled:"searchEnabled",searchEnabledSize:"searchEnabledSize",search:"search",scrollClasses:"scrollClasses",scrollStyles:"scrollStyles",buttonClasses:"buttonClasses",buttonStyles:"buttonStyles",color:"color",emitUndefined:"emitUndefined",height:"height",big:"big",big_threshold:"big_threshold"},outputs:{optionChange:"optionChange",searchChange:"searchChange"},features:[i.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["wrapper",""],["tabindex","0",3,"scroll","click","focus",4,"ngIf"],["orientation","horizontal","autosize","","style","text-align: center; overflow-y: hidden; white-space: no-wrap; overflow-x: auto; white-space: nowrap","tabindex","0",3,"ngStyle","scroll","click","focus",4,"ngIf"],["class","fade flex jcc",4,"ngIf"],["tabindex","0",3,"scroll","click","focus"],["scrollElement",""],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"tabindex","click","focus","keydown"],["button",""],["orientation","horizontal","autosize","","tabindex","0",2,"text-align","center","overflow-y","hidden","white-space","no-wrap","overflow-x","auto","white-space","nowrap",3,"ngStyle","scroll","click","focus"],["bigScrollElement",""],[3,"class","style","ngClass",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"fade","flex","jcc"],[1,"tcenter","bl",3,"ngModel","ngModelChange"]],template:function(t,s){1&t&&i.YNc(0,M,5,3,"div",0),2&t&&i.Q6J("ngIf",s.__options)},directives:[r.O5,u.n,r.sg,r.mk,a.N7,f.hq,r.PC,a.x0,p.Fj,p.JJ,p.On],styles:["select[_ngcontent-%COMP%]{max-width:calc(100vw - 4rem)}button[_ngcontent-%COMP%]{font:inherit;color:inherit;background:inherit;border:inherit;margin:0}.zen[_ngcontent-%COMP%]:focus{outline:none!important;outline:none -webkit-focus-ring-color}"]}),t})()}}]);