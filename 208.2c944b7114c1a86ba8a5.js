(self.webpackChunkgrams=self.webpackChunkgrams||[]).push([[208],{1603:(t,e,s)=>{"use strict";s.d(e,{n:()=>l});var o=s(4788);const i=["child"],n=["*"];let l=(()=>{class t{constructor(){this.scroll=new o.vpe}ngOnInit(){this.classes=this.classes?"scrollable "+this.classes:"scrollable tcenter bl",this.styles||(this.styles="")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["common-ng-scroll-element"]],viewQuery:function(t,e){if(1&t&&o.Gf(i,5),2&t){let t;o.iGM(t=o.CRH())&&(e.child=t.first)}},inputs:{classes:"classes",styles:"styles"},outputs:{scroll:"scroll"},ngContentSelectors:n,decls:4,vars:4,consts:[[3,"scroll"],["child",""]],template:function(t,e){1&t&&(o.F$t(),o.TgZ(0,"div",0,1),o.NdJ("scroll",function(t){return e.scroll.emit(t)}),o.Hsn(2),o._UZ(3,"div"),o.qZA()),2&t&&(o.Akn(e.styles),o.Tol(e.classes))},styles:[""]}),t})()},7208:(t,e,s)=>{"use strict";s.d(e,{r:()=>M});var o=s(4762),i=s(4788),n=s(6682),l=s(2759),c=s(5335),h=s(267),r=s(2057),u=s(1603),a=s(5489),f=s(9202),p=s(4751);const d=["bigScrollElement"],g=["scrollElement"],b=["buttons"],m=function(t){return{"glo-0-shadow":t}};function v(t,e){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"button",8,9),i.NdJ("click",function(e){const s=i.CHM(t).$implicit,o=i.oxw(3);return e.stopPropagation(),o.select(s)})("focus",function(e){const s=i.CHM(t).index,o=i.MAs(2);return i.oxw(3).buttonFocus(s,e,o)})("keydown",function(e){i.CHM(t);const s=i.MAs(2);i.oxw();const o=i.MAs(1);return i.oxw(2).cycleButton(e,o,s)}),i._uU(3),i.qZA(),i.BQk()}if(2&t){const t=e.$implicit,s=i.oxw(3);i.xp6(1),i.Akn(s.buttonStyles),i.Tol(s.buttonClasses),i.s9C("tabindex",s.trap_focus?0:-1),i.Q6J("ngClass",i.VKq(7,m,s.toggleable&&t===s.selected)),i.xp6(2),i.hij(" ",s._options[t]," ")}}function _(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"common-ng-scroll-element",5,6),i.NdJ("scroll",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e)})("click",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e,"click")})("focus",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e)}),i.YNc(2,v,4,9,"ng-container",7),i.qZA()}if(2&t){const t=i.oxw(2);i.xp6(2),i.Q6J("ngForOf",t.__options)}}function w(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",8,9),i.NdJ("click",function(e){const s=i.CHM(t).$implicit,o=i.oxw(3);return e.stopPropagation(),o.select(s)})("focus",function(e){const s=i.CHM(t).index,o=i.MAs(1);return i.oxw(3).buttonFocus(s,e,o,!0)})("keydown",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw(2).cycleButton(e,o,s,!0)}),i._uU(2),i.qZA()}if(2&t){const t=e.$implicit,s=e.index,o=i.oxw(3);i.Akn(o.buttonStyles),i.Tol(o.buttonClasses),i.s9C("tabindex",o.trap_focus?0:-1),i.Q6J("ngClass",i.VKq(8,m,o.toggleable&&t===o.selected)),i.uIk("x-button-i",s),i.xp6(2),i.hij(" ",o._options[t]," ")}}const y=function(t){return{height:t}};function x(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"cdk-virtual-scroll-viewport",10,11),i.NdJ("scroll",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e)})("click",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e,"click")})("focus",function(e){i.CHM(t);const s=i.MAs(1);i.oxw();const o=i.MAs(1);return i.oxw().focus(o,s,e)}),i.YNc(2,w,3,10,"button",12),i.qZA()}if(2&t){const t=i.oxw(2);i.Q6J("ngStyle",i.VKq(2,y,t.height)),i.xp6(2),i.Q6J("cdkVirtualForOf",t.__options)}}function C(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",13),i.TgZ(1,"input",14),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw(2).search=e})("ngModelChange",function(){i.CHM(t);const e=i.oxw(2);return e.searchChange.emit(e.search),e.filter()}),i.qZA(),i.qZA()}if(2&t){const t=i.oxw(2);i.xp6(1),i.Q6J("ngModel",t.search)}}function k(t,e){if(1&t&&(i.TgZ(0,"div",null,1),i.YNc(2,_,3,1,"common-ng-scroll-element",2),i.YNc(3,x,3,4,"cdk-virtual-scroll-viewport",3),i.YNc(4,C,2,1,"div",4),i.qZA()),2&t){const t=i.oxw();i.xp6(2),i.Q6J("ngIf",!t.big),i.xp6(1),i.Q6J("ngIf",t.big),i.xp6(1),i.Q6J("ngIf",t.show_search)}}let M=(()=>{class t{constructor(t,e,s){this.cd=t,this.json=e,this.document=s,this.selected=-7,this.optionChange=new i.vpe,this.toggleable=!0,this.searchEnabled=!0,this.searchEnabledSize=1,this.search="",this.searchChange=new i.vpe,this.color="white",this.emitUndefined=!0,this.height="3.25rem",this.big=!1,this.big_threshold=77,this.show_search=!1,this.has_focus=!1,this.trap_focus=!1,this.focused_button=0}ngOnInit(){this.buttonClasses||(this.buttonClasses="p glo-0-text-ani ib"),this.buttonStyles||(this.buttonStyles="")}ngOnChanges(t){setTimeout(()=>{var e,s;if("options"in t){if(t.options.firstChange||this.select(-7),t.options.currentValue){let e=this.json.typeOf(t.options.currentValue);if("obj"===e){let e=this.json.keys(t.options.currentValue);e.length>0&&(this._type=this.json.typeOf(t.options.currentValue[e[0]])+"{}")}else"arr"===e&&t.options.currentValue.length>0&&(this._type=this.json.typeOf(t.options.currentValue[0])+"[]");this._type&&this.setOptions()}this.big=(null===(e=this.options)||void 0===e?void 0:e.length)>=this.big_threshold}if(this.json.isDefined(this.initial)&&!this.option&&(null===(s=this._options)||void 0===s?void 0:s.length)>0){let t=this.json.typeOf(this.initial);if("boo"===t)this.select(0);else if("num"===t)this.select(this.initial);else if("str"===t)for(let e=0;e<this._options.length;e++)if(this._options[e]===this.initial){this.select(e);break}}if("option"in t&&this._options)for(let o=0;o<this._options.length;o++)if("str[]"===this._type){if(this._options[o]===t.option.currentValue){this.selected!==o&&this.select(o);break}}else if(this.path&&this._options[o]===this.json.pathToValue(t.option.currentValue,this.path)){this.selected!==o&&this.select(o);break}},0)}cycleBig(t,e,s,i,n){return(0,o.mG)(this,void 0,void 0,function*(){let t;0===n?e.elementRef.nativeElement.scrollTo({left:0,behavior:"instant"}):n===this.__options.length-1&&e.elementRef.nativeElement.scrollTo({left:e.elementRef.nativeElement.scrollWidth,behavior:"instant"});let s,l=()=>(0,o.mG)(this,void 0,void 0,function*(){var s,o;let l;yield new Promise(t=>{setTimeout(()=>{t(!0)},0)}),t=null===(o=null===(s=null==e?void 0:e.elementRef)||void 0===s?void 0:s.nativeElement)||void 0===o?void 0:o.querySelectorAll("button");for(let e of t)if(+e.attributes["x-button-i"].value===n){l=e;break}if(l)return l;n>i?e.elementRef.nativeElement.scrollBy({left:24,behavior:"instant"}):i&&e.elementRef.nativeElement.scrollBy({left:-24,behavior:"instant"})});for(;!s;)s=yield l();return s.focus()})}cycleButton(t,e,s,i=!1){var n,l;return(0,o.mG)(this,void 0,void 0,function*(){let o=+s.attributes["x-button-i"].value;if("Tab"===(null==t?void 0:t.key)){t.preventDefault();let c,h=this.focused_button+1;return h=t.shiftKey?this.focused_button-1:this.focused_button+1,h<0?h=this.__options.length-1:h>this.__options.length-1&&(h=0),i?this.cycleBig(t,e,s,o,h):(c=null===(l=null===(n=null==e?void 0:e.child)||void 0===n?void 0:n.nativeElement)||void 0===l?void 0:l.querySelectorAll("button"),c[h].focus())}})}buttonFocus(t,e,s,i=!1){return(0,o.mG)(this,void 0,void 0,function*(){this.focused_button=i?+s.attributes["x-button-i"].value:t})}focus(t,e,s,i){return(0,o.mG)(this,void 0,void 0,function*(){let o=s.srcElement;this.trap_focus=!1,this.searchEnabled&&!this.has_focus$&&this._options.length>=this.searchEnabledSize&&(this.show_search=!0,this.has_focus$=(0,n.T)((0,l.R)(this.document.document.documentElement,"mousedown"),(0,l.R)(this.document.document.documentElement,"touchstart"),(0,l.R)(this.document.document.documentElement,"keyup")).subscribe(s=>{var i,n;if(-1===s.composedPath().indexOf(t))this.unfocus();else if("Enter"===(null==s?void 0:s.key))if(this.trap_focus)s.preventDefault();else{let t=null===(n=null===(i=e.child)||void 0===i?void 0:i.nativeElement)||void 0===n?void 0:n.querySelector("button");t||(t=e.elementRef.nativeElement.querySelector("button")),t&&(t.focus(),this.trap_focus=!0)}else"Escape"===(null==s?void 0:s.key)&&(this.trap_focus=!1,o.focus())}))})}unfocus(){this.show_search=!1,this.has_focus$&&this.has_focus$.unsubscribe(),this.has_focus$=null}select(t,e=!0){t<0||this.selected===t?(this.selected=-7,this.option=void 0,this._option=void 0):(this.selected=t,this._type.endsWith("[]")?(this.option=this.options[this.selected],this._option=this._options[this.selected]):this._type.endsWith("{}")&&!this.path?(this._option=this._options[this.selected],this.option=this.options[this._option]):this._type.endsWith("{}")&&this.path&&(this.option=this.json.values(this.options)[this.selected],this._option=this._options[this.selected])),e&&(void 0!==this.option||this.emitUndefined)&&this.optionChange.emit(this.option)}setOptions(){if("str[]"===this._type)this._options=this.options;else if(this._type.endsWith("[]")&&this.path){let t=[];for(let e of this.options)t.push(this.json.pathToValue(e,this.path));this._options=t}else if(this._type.endsWith("{}")&&!this.path)this._options=this.json.keys(this.options);else if(this._type.endsWith("{}")&&this.path){let t=[];for(let e of this.json.values(this.options))t.push(this.json.pathToValue(e,this.path));this._options=t}this.filter()}filter(){if(!this.searchEnabled||0===this.search.trim().length)return void(this.__options=Array.from(Array(this._options.length).keys()));let t=[];for(let e=0;e<this._options.length;e++){let s=this._options[e];(this.search.toLowerCase().includes(s.toLowerCase())||s.toLowerCase().includes(this.search.toLowerCase()))&&t.push(e)}this.__options=t}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.sBO),i.Y36(c.V),i.Y36(h.k))},t.\u0275cmp=i.Xpm({type:t,selectors:[["common-ng-select-element"]],viewQuery:function(t,e){if(1&t&&(i.Gf(d,5),i.Gf(g,5),i.Gf(b,5)),2&t){let t;i.iGM(t=i.CRH())&&(e.bigScrollElement=t.first),i.iGM(t=i.CRH())&&(e.scrollElement=t.first),i.iGM(t=i.CRH())&&(e.buttons=t)}},inputs:{option:"option",options:"options",path:"path",initial:"initial",toggleable:"toggleable",filterFun:"filterFun",searchEnabled:"searchEnabled",searchEnabledSize:"searchEnabledSize",search:"search",scrollClasses:"scrollClasses",scrollStyles:"scrollStyles",buttonClasses:"buttonClasses",buttonStyles:"buttonStyles",color:"color",emitUndefined:"emitUndefined",height:"height",big:"big",big_threshold:"big_threshold"},outputs:{optionChange:"optionChange",searchChange:"searchChange"},features:[i.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["wrapper",""],["tabindex","0",3,"scroll","click","focus",4,"ngIf"],["orientation","horizontal","autosize","","style","text-align: center; overflow-y: hidden; white-space: no-wrap; overflow-x: auto; white-space: nowrap","tabindex","0",3,"ngStyle","scroll","click","focus",4,"ngIf"],["class","fade flex jcc",4,"ngIf"],["tabindex","0",3,"scroll","click","focus"],["scrollElement",""],[4,"ngFor","ngForOf"],[3,"ngClass","tabindex","click","focus","keydown"],["button",""],["orientation","horizontal","autosize","","tabindex","0",2,"text-align","center","overflow-y","hidden","white-space","no-wrap","overflow-x","auto","white-space","nowrap",3,"ngStyle","scroll","click","focus"],["bigScrollElement",""],[3,"class","style","ngClass","tabindex","click","focus","keydown",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"fade","flex","jcc"],[1,"tcenter","bl",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&i.YNc(0,k,5,3,"div",0),2&t&&i.Q6J("ngIf",e.__options)},directives:[r.O5,u.n,r.sg,r.mk,a.N7,f.hq,r.PC,a.x0,p.Fj,p.JJ,p.On],styles:["select[_ngcontent-%COMP%]{max-width:calc(100vw - 4rem)}button[_ngcontent-%COMP%]{font:inherit;color:inherit;background:inherit;border:inherit;margin:0}.zen[_ngcontent-%COMP%]:focus{outline:none!important;outline:none -webkit-focus-ring-color}"]}),t})()}}]);